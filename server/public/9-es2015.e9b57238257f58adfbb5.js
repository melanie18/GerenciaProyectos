(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{pIwm:function(t,e,i){"use strict";i.r(e),i.d(e,"routes",function(){return B}),i.d(e,"HomepageModule",function(){return E});var s=i("ofXK"),c=i("3Pt+"),o=i("tyNb"),a=i("QUrN"),n=i("fXoL");let r=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({}),t})();var l=i("PCNd"),b=i("l7P3"),d=i("dhLW"),h=i("Ql7B"),p=i("PcjG"),m=i("1KGp"),u=i("Ep5b"),g=i("dOps"),f=i("MutI"),_=i("FKr1");function v(t,e){if(1&t&&(n.Ub(0,"mat-list-item"),n.Pb(1,"img",4),n.Ub(2,"h3",5),n.Dc(3),n.Tb(),n.Ub(4,"p",5),n.Ub(5,"span"),n.Dc(6),n.hc(7,"amTimeAgo"),n.hc(8,"amFromUnix"),n.Tb(),n.Tb(),n.Tb()),2&t){const t=e.$implicit;n.Db(1),n.mc("alt",t.name),n.Db(2),n.Fc(" ",t.name," "),n.Db(3),n.Fc("Last connection: ",n.ic(7,3,n.ic(8,5,t.last_login))," ")}}function U(t,e){if(1&t&&(n.Ub(0,"mat-list"),n.Bc(1,v,9,7,"mat-list-item",3),n.Tb()),2&t){const t=n.gc();n.Db(1),n.lc("ngForOf",t.contacts)}}function T(t,e){1&t&&(n.Ub(0,"p",6),n.Dc(1,"You don't have contacts yet."),n.Tb())}let C=(()=>{class t{constructor(t,e,i){this._store=t,this._service=e,this._serviceProfile=i,this.contacts=[],this.userLogged=this._serviceProfile.getUserLogged(),this.contacts$=this._store.pipe(Object(b.t)(g.e)),this.contacts$.subscribe(t=>{void 0!==t&&(this.contacts=t)})}ngOnInit(){this.getContacs()}getContacs(){this._store.dispatch(new g.b(this.userLogged._id))}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(b.i),n.Ob(h.a),n.Ob(m.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["meet-app-contact-list"]],features:[n.Cb([h.a])],decls:6,vars:2,consts:[[1,"contact-list"],[4,"ngIf","ngIfElse"],["noContacts",""],[4,"ngFor","ngForOf"],["matListAvatar","","src","../../../../../assets/images/avatar.png",3,"alt"],["matLine",""],[1,"mt-20"]],template:function(t,e){if(1&t&&(n.Ub(0,"section",0),n.Ub(1,"h3"),n.Dc(2,"Contacts"),n.Tb(),n.Bc(3,U,2,1,"mat-list",1),n.Bc(4,T,2,0,"ng-template",null,2,n.Cc),n.Tb()),2&t){const t=n.rc(5);n.Db(3),n.lc("ngIf",e.contacts.length)("ngIfElse",t)}},directives:[s.k,f.a,s.j,f.c,f.b,_.k],pipes:[a.c,a.a],styles:[".contact-list{padding:20px;border-top-right-radius:8px;border-top-left-radius:8px;background-color:#f1f1f1}.contact-list mat-list{margin-top:20px}.contact-list mat-list mat-list-item{cursor:pointer}.contact-list mat-list mat-list-item .mat-list-item-content{padding-right:0!important;padding-left:0!important}"],encapsulation:2}),t})();var D=i("bTqV"),O=i("NFeN");function w(t,e){if(1&t){const t=n.Vb();n.Ub(0,"mat-list-item"),n.Pb(1,"img",4),n.Ub(2,"h3",5),n.Dc(3),n.Tb(),n.Ub(4,"p",5),n.Ub(5,"span"),n.Dc(6),n.Tb(),n.Tb(),n.Ub(7,"button",6),n.cc("click",function(){n.uc(t);const i=e.$implicit;return n.gc(2).addContact(i)}),n.Ub(8,"mat-icon"),n.Dc(9,"add_circle"),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=e.$implicit;n.Db(1),n.mc("alt",t.name),n.Db(2),n.Fc(" ",t.name," "),n.Db(3),n.Fc("Email: ",t.email," ")}}function y(t,e){if(1&t&&(n.Ub(0,"mat-list"),n.Bc(1,w,10,3,"mat-list-item",3),n.Tb()),2&t){const t=n.gc();n.Db(1),n.lc("ngForOf",t.users)}}function I(t,e){1&t&&(n.Ub(0,"p",7),n.Dc(1,"You don't have users available to add."),n.Tb())}let L=(()=>{class t{constructor(t,e){this._store=t,this._serviceProfile=e,this.contacts=[],this.users=[],this.userLogged=this._serviceProfile.getUserLogged(),this.contacts$=this._store.pipe(Object(b.t)(g.e)),this.contacts$.subscribe(t=>{void 0!==t&&(this.contacts=t)}),this.users$=this._store.pipe(Object(b.t)(g.f)),this.users$.subscribe(t=>{void 0!==t&&(this.users=t.filter(t=>{const e=this.contacts.filter(e=>e._id===t._id);if(t._id!==this.userLogged._id&&0===e.length)return t}))})}ngOnInit(){this.getUsers()}getUsers(){this._store.dispatch(new g.c)}addContact(t){this._store.dispatch(new g.a({user:this.userLogged._id,contact:t._id}))}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(b.i),n.Ob(m.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["meet-app-users-list"]],features:[n.Cb([h.a])],decls:6,vars:2,consts:[[1,"users-list"],[4,"ngIf","ngIfElse"],["noUsers",""],[4,"ngFor","ngForOf"],["matListAvatar","","src","../../../../../assets/images/avatar.png",3,"alt"],["matLine",""],["mat-icon-button","",3,"click"],[1,"mt-20"]],template:function(t,e){if(1&t&&(n.Ub(0,"section",0),n.Ub(1,"h3"),n.Dc(2,"Users"),n.Tb(),n.Bc(3,y,2,1,"mat-list",1),n.Bc(4,I,2,0,"ng-template",null,2,n.Cc),n.Tb()),2&t){const t=n.rc(5);n.Db(3),n.lc("ngIf",e.users.length)("ngIfElse",t)}},directives:[s.k,f.a,s.j,f.c,f.b,_.k,D.a,O.a],styles:[".users-list{padding:20px;border-top:3px solid #ccc;border-bottom-right-radius:8px;border-bottom-left-radius:8px;background-color:#f1f1f1}.users-list mat-list{margin-top:20px}.users-list mat-list .mat-list-item-content{padding-right:0!important;padding-left:0!important}"],encapsulation:2}),t})();var P=i("pLZG"),x=i("ZF+8");const F=["localVideo"],j=["remoteVideo"];function k(t,e){if(1&t){const t=n.Vb();n.Sb(0),n.Ub(1,"header",2),n.Ub(2,"button",3),n.cc("click",function(){return n.uc(t),n.gc().createCall()}),n.Dc(3,"Create Meet"),n.Tb(),n.Ub(4,"button",3),n.cc("click",function(){return n.uc(t),n.gc().joinCall()}),n.Dc(5,"Join Meet"),n.Tb(),n.Tb(),n.Rb()}}function $(t,e){if(1&t){const t=n.Vb();n.Sb(0),n.Ub(1,"div",4),n.Ub(2,"div",5),n.Pb(3,"video",6,7),n.Tb(),n.Ub(5,"div",8),n.Pb(6,"video",9,10),n.Tb(),n.Tb(),n.Ub(8,"div",11),n.Ub(9,"button",12),n.cc("click",function(){return n.uc(t),n.gc().endCall()}),n.hc(10,"async"),n.Ub(11,"mat-icon"),n.Dc(12,"call_end"),n.Tb(),n.Tb(),n.Tb(),n.Rb()}if(2&t){const t=n.gc();n.Db(6),n.lc("muted",!0),n.Db(3),n.lc("disabled",!n.ic(10,2,t.isCallStarted$))}}let V=(()=>{class t{constructor(t,e,i,s){this._service=t,this._serviceProfile=e,this._utils=i,this._formBuilder=s,this.inCall=!1,this.userLogged=this._serviceProfile.getUserLogged(),this.isCallStarted$=this._service.isCallStarted$,this.peerId=this._service.initPeer(),this.modalForm=this._formBuilder.group({id:["",""]})}ngOnInit(){this._service.localStream$.pipe(Object(P.a)(t=>!!t)).subscribe(t=>this.localVideo.nativeElement.srcObject=t),this._service.remoteStream$.pipe(Object(P.a)(t=>!!t)).subscribe(t=>this.remoteVideo.nativeElement.srcObject=t)}ngOnDestroy(){this._service.destroyPeer()}createCall(){this._utils.showDialog({width:500,data:{title:"Room created",message:this.peerId},onClose:()=>{this._service.enableCallAnswer(),this.inCall=!0}})}joinCall(){this._utils.showDialog({width:500,data:{title:"Type the id of the room",formElement:this.modalForm,model:this.modalForm.value,confirm:!0,form:[{name:"id",type:"text",placeholder:"Room Id"}],onChange:t=>{this.modalForm.patchValue(t)}},onClose:t=>{t.action&&(this._service.establishMediaCall(this.modalForm.value.id),this.inCall=!0)}})}endCall(){this._service.closeMediaCall(),this.inCall=!1}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(h.a),n.Ob(m.a),n.Ob(x.a),n.Ob(c.d))},t.\u0275cmp=n.Ib({type:t,selectors:[["meet-app-chat"]],viewQuery:function(t,e){if(1&t&&(n.Gc(F,1),n.Gc(j,1)),2&t){let t;n.qc(t=n.dc())&&(e.localVideo=t.first),n.qc(t=n.dc())&&(e.remoteVideo=t.first)}},features:[n.Cb([h.a])],decls:3,vars:2,consts:[[1,"chat"],[4,"ngIf"],[1,"chat__header"],["mat-raised-button","","color","primary",3,"click"],[1,"chat__call","grid-bottom"],[1,"remote-video","col-10_xs-12"],["id","remote-video","poster","../../../../../assets/images/video-placeholder.jpg","autoplay","","playsinline",""],["remoteVideo",""],[1,"local-video","col-2_xs-12"],["id","local-video","autoplay","","playsinline","",3,"muted"],["localVideo",""],[1,"chat__actions"],["mat-icon-button","","color","accent",1,"mat-elevation-z2",3,"disabled","click"]],template:function(t,e){1&t&&(n.Ub(0,"div",0),n.Bc(1,k,6,0,"ng-container",1),n.Bc(2,$,13,4,"ng-container",1),n.Tb()),2&t&&(n.Db(1),n.lc("ngIf",!e.inCall),n.Db(1),n.lc("ngIf",e.inCall))},directives:[s.k,D.a,O.a],pipes:[s.b],styles:[".chat__header{text-align:right}.chat__header button{margin-right:10px}.chat__header button:last-child{margin-right:0}.chat__call video{-o-object-fit:cover;object-fit:cover}.chat__call .remote-video video{width:100%}.chat__actions{text-align:center}"],encapsulation:2}),t})();const B=[{path:"",component:(()=>{class t{constructor(t,e){this._store=t,this._serviceProfile=e,this.isLoading$=this._store.pipe(Object(b.t)(d.c)),this.userLogged=this._serviceProfile.getUserLogged()}ngOnInit(){}goTo(t){this._store.dispatch(new p.b({path:[t]}))}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(b.i),n.Ob(m.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["meet-app-homepage"]],features:[n.Cb([h.a,m.a])],decls:10,vars:4,consts:[[1,"p-home-page"],[3,"show","overlay"],[1,"p-home-page__container","container","mat-elevation-z2"],[1,"grid"],[1,"p-home-page__lists","col-4_xs-12_md-5"],[1,"p-home-page__chat","col-8_xs-12_md-7"]],template:function(t,e){1&t&&(n.Ub(0,"section",0),n.Pb(1,"meet-app-loader",1),n.hc(2,"async"),n.Ub(3,"div",2),n.Ub(4,"div",3),n.Ub(5,"aside",4),n.Pb(6,"meet-app-contact-list"),n.Pb(7,"meet-app-users-list"),n.Tb(),n.Ub(8,"div",5),n.Pb(9,"meet-app-chat"),n.Tb(),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.Db(1),n.lc("show",n.ic(2,2,e.isLoading$))("overlay",!0))},directives:[u.a,C,L,V],pipes:[s.b],styles:[".p-home-page__container{padding:20px;border-radius:8px;background-color:#fff}"],encapsulation:2}),t})(),pathMatch:"full"}];let E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({providers:[...h.b],imports:[[s.c,c.g,c.o,r,l.a,a.b,o.g.forChild(B)]]}),t})()}}]);